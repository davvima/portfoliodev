---
import SunIcon from "../Icons/SunIcon.astro"
import MoonIcon from "../Icons/MoonIcon.astro"
---

<button
  id="theme-toggle"
  class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700"
  title="Cambiar tema"
>
  <div class="sun-icon">
    <SunIcon className="w-6 h-6" />
  </div>
  <div class="moon-icon hidden">
    <MoonIcon className="w-6 h-6" />
  </div>
</button>

<script>
  const themeToggle = document.getElementById("theme-toggle")
  const sunIcon = themeToggle?.querySelector(".sun-icon")
  const moonIcon = themeToggle?.querySelector(".moon-icon")

  const updateIcons = () => {
    if (document.documentElement.classList.contains("dark")) {
      sunIcon?.classList.add("hidden")
      moonIcon?.classList.remove("hidden")
    } else {
      sunIcon?.classList.remove("hidden")
      moonIcon?.classList.add("hidden")
    }
  }

  updateIcons()

  themeToggle?.addEventListener("click", () => {
    const isDark = document.documentElement.classList.toggle("dark")
    localStorage.setItem("theme", isDark ? "dark" : "light")
    updateIcons()
  })
</script>
